self.addEventListener("push",(e=>{e.waitUntil((async()=>{const t=e.data.json();console.log("Push Notification diterima:",t),self.registration.showNotification(t.title,{body:t.body})})())}));const CACHE_NAME="berbagi-cerita-v2",getAssets=async()=>{const e=await fetch("/asset-manifest.json");return["/","/index.html",`/${(await e.json())["main.js"]}`,"/manifest.json","/assets/icon192.png","/assets/icon512.png"]};self.addEventListener("install",(e=>{e.waitUntil(getAssets().then((e=>caches.open(CACHE_NAME).then((t=>t.addAll(e))))).catch((e=>{console.error("Gagal memuat aset:",e)})))})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request))))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))))}));